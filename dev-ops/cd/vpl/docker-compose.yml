version: "3"

networks:
  vpl:
    driver: bridge

# volumes:
#   database:CAMINHO_DO_HOST

services:
  # Example of container mysql.
  # vpl-bd:
  #   container_name: vpl-bd
  #   image: mysql
  #   env_file:
  #     - docker-variables.env
  #     * Create file docker-variables.env with these variables names:
  #     * MYSQL_USER=yourUser
  #     * MYSQL_PASSWORD=yourPassword
  #     * MYSQL_ROOT_PASSWORD=yourPassword
  #   ports:
  #     - 3306:3306
  #   networks:
  #     - vpl
  #   volumes:
  #     - ./data:/var/opt/mssql/data
  #   restart: always

  gateway-api:
    container_name: gateway-api
    image: vpl-be-gateway-api:latest
    ports:
      - 8000:80
    networks:
      - vpl
    # volumes:
    #   - database:CAMINHO_CONTAINER
    restart: always

  price-list-api:
    container_name: price-list-api
    image: vpl-be-price-list-service:latest
    ports:
      - 8001:80
    networks:
      - vpl
    environment:
      - SERVICES:VEHICLE=http://vehicles-api
    restart: always

  vehicles-api:
    container_name: vehicles-api
    image: vpl-be-vehicles-service:latest
    ports:
      - 8002:80
    networks:
      - vpl
    environment:
      - SERVICES:PRICELIST=http://price-list-api
    restart: always

  auth-api:
    container_name: auth-api
    image: vpl-be-auth-service:latest
    ports:
      - 8003:80
    networks:
      - vpl
    restart: always

  public-app:
    container_name: public-app
    image: vpl-fe-public-app:latest
    ports:
      - 8020:80
    networks:
      - vpl
    environment:
      - API_URL=http://192.168.2.7:8000
    restart: always

  admin-web:
    container_name: admin-web
    image: vpl-fe-admin-app:latest
    ports:
      - 8021:80
    networks:
      - vpl
    restart: always